<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta  name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="/stylesheets/styles.css">
  <title>Test</title>
</head>

<body>

  <div id="wrap">

    <div id="container" class="container-fluid">

      <nav class="navbar navbar-light bg-faded">
        <a class="navbar-brand" href="#">Navbar</a>
        <ul class="nav navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="#">Toggle A</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Toggle B</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Toggle C</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">oggle D</a>
          </li>
        </ul>
        <form class="form-inline navbar-form pull-right">
          <input class="form-control" type="text" placeholder="Search">
          <button class="btn btn-success-outline" type="submit">Search</button>
        </form>
      </nav>

      <div class="row page-header">
        <div class="col-md-12">
          <h1 class="h2 pull-left">Allocations UI</h1>
        </div>
      </div>

      <div id="main" class="row">


      </div>

       <div id="main" class="row">

          <div id="alerts-holder"></div>
          <table id="allocation" class="table table-bordered" cellpadding="0" cellspacing="0">
            <thead>
              <tr>
                <th>Venue</th>
                <th>OG</th>
                <th>OO</th>
                <th>CO</th>
                <th>CG</th>
                <th>Quality</th>
                <th>
                  <div class="col-md-2">
                    Chair
                  </div>
                  <div class="col-md-8">
                    Panel
                  </div>
                  <div class="col-md-2">
                    Trainee
                  </div>
                </th>
                <th>Bans</th>
              </tr>
            </thead>
            <tbody>
              <tr id="">
                <td></td>
                <td>A</td>
                <td>B</td>
                <td>C</td>
                <td>D</td>
                <td>
                  <ul>
                    <li>Debate importance: (1.748)</li>
                    <li>Regional representation: xx</li>
                    <li>Language representation: xx</li>
                    <li>Gender representation: xx</li>
                  </ul>
                </td>
                <td id="" class="debate-panel-holder">
                  <div class="debate-panel">
                    <div class="col-md-1 position-holder">
                      Panel Quality: x
                      Adj-adj history: x
                    </div>
                    <div class="col-md-2 debate-chair-holder position-holder">
                      <button type="button" class="btn debate-adjudicator">
                        <span class="glyphicon glyphicon-ok-circle"></span>
                        Philip Belesky (VUW) Chair+
                        <span class="glyphicon glyphicon-move drag-handle"></span>
                      </button>
                    </div>
                    <div class="col-md-6 position-holder">
                      <button type="button" class="btn debate-adjudicator">
                        <span class="glyphicon glyphicon glyphicon-record"></span>
                        Philip Belesky (VUW) Pair+
                        <span class="glyphicon glyphicon-move drag-handle"></span>
                      </button>
                      <button type="button" class="btn debate-adjudicator">
                        <span class="glyphicon glyphicon glyphicon-record"></span>
                        Philip Belesky (VUW) Pair
                        <span class="glyphicon glyphicon-move drag-handle"></span>
                      </button>
                      <button type="button" class="btn debate-adjudicator">
                        <span class="glyphicon glyphicon-ok-circle"></span>
                        Philip Belesky (VUW) Pair-
                        <span class="glyphicon glyphicon-move drag-handle"></span>
                      </button>
                    </div>
                    <div class="col-md-2 position-holder">
                      <button type="button" class="btn debate-adjudicator">
                        <span class="glyphicon glyphicon glyphicon-record"></span>
                        Philip Belesky (VUW) Train+
                        <span class="glyphicon glyphicon-move drag-handle"></span>
                      </button>
                    </div>
                    <div>
                      <span class="glyphicon glyphicon glyphicon-record drag-handle"></span>
                      <span class="glyphicon glyphicon-move drag-handle"></span>
                    </div>
                  </div>
                </td>
                <td>
                    <div class="col-md-2 debate-chair-holder position-holder">
                      <button type="button" class="btn debate-adjudicator">
                        <span class="glyphicon glyphicon-ban-circle"></span>
                        CZ Lee (UoA) Chair+
                        <span class="glyphicon glyphicon-move drag-handle"></span>
                      </button>
                    </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div id="scratch" class="row fixed-bottom">
          <table id="" class="table" cellpadding="0" cellspacing="0">
            <thead>
              <tr>
                <th>Unused Adjudicators</th>
              </tr>
            </thead>
            <tbody>

            </tbody>
          </table>
        </div>

    </div>

  </div>

  <script src="/bower_components/jquery/dist/jquery.min.js"></script>
  <script src="/bower_components/bootstrap-sass/assets/javascripts/bootstrap.min.js"></script>
  <script>

    jQuery(document).ready(function(){

      $.ajax({
        url: "/importround",
        dataType: 'json',
        type: 'GET',
        success: function (data) {
          $.each(JSON.parse(data), function (index, element) {

            // Render rooms from round import
            var newline = $("<tr><td></td><td class='og'></td><td class='oo'></td><td  class='cg'></td><td class='co'></td><td class='stats'>importance <span></span></td><td></td><td></td></tr>");
            $("#allocation tbody").append(newline);
            $(".og", newline).text(element.OG_name);
            $(".oo", newline).text(element.OO_name);
            $(".cg", newline).text(element.CG_name);
            $(".co", newline).text(element.CO_name);
            var dummy_importance = element.OG_importance + element.OO_importance + element.CG_importance + element.CO_importance;

            // Calculate importance
            $.ajax({
              url: "/room_importance/44",
              dataType: 'json',
              type: 'GET',
              success: function (data) {
                $(".stats span", newline).text(data.importance);
              },
              error: function () {
                console.log("it broke");
              }
            });

          });
        },
        error: function () {
          console.log("it broke");
        }
      });
    });
  </script>

</body>
</html>